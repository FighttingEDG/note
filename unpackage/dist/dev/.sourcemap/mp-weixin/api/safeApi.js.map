{"version":3,"file":"safeApi.js","sources":["api/safeApi.js"],"sourcesContent":["/**\r\n * 安全API调用包装器\r\n * 自动处理错误，避免每次调用API都写try-catch\r\n */\r\n\r\nimport { createSafeApi } from '@/utils/errorHandler.js';\r\nimport { memoApi } from './memoApi.js';\r\nimport { userApi } from './userApi.js';\r\n\r\n// 创建安全的用户API\r\nexport const safeUserApi = createSafeApi(userApi, {\r\n  // 默认配置\r\n  showError: true,\r\n  errorMsg: '操作失败',\r\n  loading: false, // 用户操作一般不需要全局loading\r\n  onError: (error) => {\r\n    console.error('用户API错误:', error);\r\n    // 这里可以添加其他错误处理逻辑，如错误上报等\r\n  }\r\n});\r\n// 创建安全的备忘录API\r\nexport const safeMemoApi = createSafeApi(memoApi, {\r\n  // 默认配置\r\n  showError: true,\r\n  errorMsg: '获取备忘录失败', // 这将作为后备错误信息，优先使用后端返回的错误信息\r\n  loading: true,\r\n  loadingText: '加载中...',\r\n  // 可以添加错误回调函数，用于记录错误日志或执行其他操作\r\n  onError: (error) => {\r\n    console.error('备忘录API错误:', error);\r\n    // 这里可以添加其他错误处理逻辑，如错误上报等\r\n  }\r\n});\r\n// 特殊配置的登录API\r\nexport const safeLoginApi = {\r\n  login: (loginData, options = {}) => {\r\n    return createSafeApi(userApi, {\r\n      showError: true,\r\n      errorMsg: '登录失败',\r\n      loading: true,\r\n      loadingText: '登录中...',\r\n      onError: (error) => {\r\n        console.error('登录API错误:', error);\r\n      }\r\n    }).login(loginData, options);\r\n  }\r\n};"],"names":["createSafeApi","userApi","uni","memoApi"],"mappings":";;;;;AAU2BA,mBAAa,cAACC,qBAAS;AAAA;AAAA,EAEhD,WAAW;AAAA,EACX,UAAU;AAAA,EACV,SAAS;AAAA;AAAA,EACT,SAAS,CAAC,UAAU;AAClBC,kBAAA,MAAA,MAAA,SAAA,wBAAc,YAAY,KAAK;AAAA,EAEhC;AACH,CAAC;AAEW,MAAC,cAAcF,mBAAa,cAACG,qBAAS;AAAA;AAAA,EAEhD,WAAW;AAAA,EACX,UAAU;AAAA;AAAA,EACV,SAAS;AAAA,EACT,aAAa;AAAA;AAAA,EAEb,SAAS,CAAC,UAAU;AAClBD,kBAAc,MAAA,MAAA,SAAA,wBAAA,aAAa,KAAK;AAAA,EAEjC;AACH,CAAC;;"}